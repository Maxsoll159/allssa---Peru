(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{7265:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/signin",function(){return n(4883)}])},4883:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(5893),i=n(639),a=n(3234),s=n(979),o=n(7741),l=n(6154),u=n(5113),c=n(5675),d=n.n(c),h=n(7294),g=n(2920),f=n(3665),x=n(7974);let p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{data:t,refetch:n,isLoading:r}=(0,f.Dv)(x.w);return(0,h.useEffect)(()=>{t&&t.isLoggedIn&&(window.location.pathname=e)},[t,e]),{user:t,isLoading:r,userRefetch:n}},w=()=>{let{user:e,userRefetch:t,isLoading:n}=p("/"),[c,f]=(0,h.useState)(""),[x,w]=(0,h.useState)(""),[v,b]=(0,h.useState)(!1),j=async e=>{e.preventDefault(),b(!0);try{let n=await (0,u.JQ)(x);await l.Z.post("/api/auth/signin",{username:c,password:n}),t()}catch(s){var r,i,a;console.error(s),w(""),g.Am.error(null!==(a=null==s?void 0:null===(r=s.response)||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:i.error)&&void 0!==a?a:"Hubo un error al iniciar sesi\xf3n")}b(!1)};return n||!e||e.isLoggedIn?null:(0,r.jsx)(i.Kq,{w:"100vw",h:"100vh",bg:"primary.200",children:(0,r.jsxs)(i.xu,{alignItems:"start-flex",m:"auto",w:"30rem",bg:"white",border:"2px solid",borderColor:"gray.500",borderRadius:"12",p:"6",shadow:"lg",children:[(0,r.jsxs)(i.Ug,{w:"full",justifyContent:"space-between",children:[(0,r.jsxs)(i.gC,{alignItems:"start-flex",spacing:"1",children:[(0,r.jsx)(i.X6,{as:"h4",size:"md",color:"text.dark",children:"Bienvenido"}),(0,r.jsx)(i.xv,{color:"gray.500",children:"Ingresa tus credenciales para acceder"})]}),(0,r.jsx)(d(),{src:"/logo.jpg",alt:"logo",height:76,width:76})]}),(0,r.jsx)(i.iz,{my:"4"}),(0,r.jsx)("form",{onSubmit:j,children:(0,r.jsxs)(i.gC,{spacing:"4",children:[(0,r.jsx)(a.NI,{children:(0,r.jsx)(s.II,{border:"1px solid",borderColor:"gray.500",type:"text",placeholder:"Nombre de usuario",value:c,onChange:e=>f(e.target.value)})}),(0,r.jsx)(a.NI,{children:(0,r.jsx)(s.II,{border:"1px solid",borderColor:"gray.500",type:"password",placeholder:"Contrase\xf1a",value:x,onChange:e=>w(e.target.value)})}),(0,r.jsx)(o.zx,{disabled:!c||!x,isLoading:v,w:"full",type:"submit",children:"Iniciar sesi\xf3n"})]})})]})})};var v=n(9008),b=n.n(v);function j(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b(),{children:(0,r.jsx)("title",{children:"Dataverifica - Login"})}),(0,r.jsx)(w,{})]})}},7974:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var r=n(6869),i=n(7796);let[,a]=(0,r.K_)(e=>({queryKey:["user"],queryFn:()=>i.o.get("/api/user").then(e=>e.data).catch(async()=>{await i.o.post("/api/auth/signout"),window.location.pathname="/auth/signin"})}))},8976:function(e,t,n){"use strict";n.d(t,{o:function(){return a}});var r=n(6154),i=n(3454);let a=r.Z.create({baseURL:i.env.NEXT_PUBLIC_BACKEND_URL})},7796:function(e,t,n){"use strict";n.d(t,{o:function(){return r.o}});var r=n(8976)},5113:function(e,t,n){"use strict";n.d(t,{JQ:function(){return a}});let r=e=>{let t=new DataView(e),n="";for(let r=0;r<t.byteLength;r+=4)n+=t.getUint32(r).toString(16).padStart(8,"0");return n},i=e=>async(t,{outputFormat:n="hex"}={})=>{"string"==typeof t&&(t=new globalThis.TextEncoder().encode(t));let i=await globalThis.crypto.subtle.digest(e,t);return"hex"===n?r(i):i};i("SHA-1");let a=i("SHA-256");i("SHA-384"),i("SHA-512")}},function(e){e.O(0,[897,774,888,179],function(){return e(e.s=7265)}),_N_E=e.O()}]);